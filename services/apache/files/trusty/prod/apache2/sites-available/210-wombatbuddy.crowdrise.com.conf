<VirtualHost *:80>
  ServerAdmin webmaster@localhost
  ServerName wombatbuddy.crowdrise.com 

  RewriteEngine on
  ReWriteCond %{SERVER_PORT} !^443$
  RewriteRule ^/(.*) https://%{HTTP_HOST}/$1 [NC,R,L] 

  ErrorLog /var/www/vhosts/wombatbuddy.crowdrise.com/logs/error.log
  CustomLog /var/www/vhosts/wombatbuddy.crowdrise.com/logs/access.log combined
</VirtualHost>
<VirtualHost *:443>
  ServerAdmin webmaster@localhost
  ServerName wombatbuddy.crowdrise.com
  DocumentRoot /var/www/vhosts/wombatbuddy.crowdrise.com/htdocs/content/
  <Directory /var/www/vhosts/wombatbuddy.crowdrise.com/htdocs/content/>
    AuthType Basic
    AuthName "Restricted Area"
    AuthUserFile "/var/www/vhosts/wombatbuddy.crowdrise.com/.htpasswd"
    Require valid-user
    Options  FollowSymLinks MultiViews
    AllowOverride All
    Order Allow,Deny
    SetEnvIf Request_URI "(/crowdrise/.*ping.*)" envAllow
    Allow from env=envAllow
    Allow from env=REDIRECT_envAllow
    Satisfy any
  </Directory>

  ErrorLog /var/www/vhosts/wombatbuddy.crowdrise.com/logs/error.log

  # Possible values include: debug, info, notice, warn, error, crit,
  # alert, emerg.
  LogLevel notice

  CustomLog /var/www/vhosts/wombatbuddy.crowdrise.com/logs/access.log combined
  SSLEngine on

  SSLCertificateFile      /etc/tls/certs/wildcard.crowdrise.com.crt
  SSLCertificateKeyFile   /etc/tls/private/wildcard.crowdrise.com.key
  SSLCertificateChainFile /etc/tls/certs/wildcard.crowdrise.com.crt.ca
  #
</VirtualHost>
# vim: set ft=apache ts=8 sw=2 tw=80 et :
